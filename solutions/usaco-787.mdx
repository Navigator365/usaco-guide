---
id: usaco-787
source: USACO Silver 2018 January
title: Rental Service
author: Ã“scar Garries
---

[Official Analysis](http://www.usaco.org/current/data/sol_rental_silver_jan18.html)

<LanguageSection>
<CPPSection>

## Implementation
```cpp
#include <bits/stdc++.h>

using namespace std;
using ll = long long;

bool cmp (const pair<int, int>& a, const pair<int, int>& b) {
	return a.first > b.first;
}
int main() {
	freopen("rental.in", "r", stdin);
	freopen("rental.out", "w", stdout);

	int n, m, r;
	cin >> n >> m >> r;

	vector<int> production(n);

	for (int i = 0; i < n; i++) {
		cin >> production[i];
	}

	vector<pair<int, int>> shops(m);

	for (int i = 0; i < m; i++) {
		cin >> shops[i].second >> shops[i].first;
	}
	vector<int> rent(r);

	for (int i = 0; i < r; i++) {
		cin >> rent[i];
	}

	sort(rent.begin(), rent.end(), greater<int>());
	sort(shops.begin(), shops.end(), cmp);
	sort(production.begin(), production.end(), greater<int>());

	int iShop = 0;
	int iRent = 0;
	int i = 0;
	ll sol = 0;
	while (i < n) {
		int litres = production[i];
		int moneyT = 0, curI = iShop;
		int last = 0;
		while (curI < m) {
			int rest = min(litres, shops[curI].second);
			moneyT += shops[curI].first * rest;
			litres -= rest;

			if (litres == 0) {
				last = rest;
				break;
			} else {
				curI++;
			}
		}

		if (iRent >= r || moneyT > rent[iRent]) {
			sol += moneyT;
			iShop = curI;
			if (iShop < m) shops[iShop].second -= last;
			i++;
		} else {
			sol += rent[iRent];
			n--;
			iRent++;
		}
	}

	cout << sol << '\n';
}
```

</CPPSection>
<JavaSection>
```java
import java.io.*
import java.util.*;

public class RentalService {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader("rental.in"));
        PrintWriter out = new PrintWriter("rental.out");
        StringTokenizer s = new StringTokenizer(br.readLine());
        int n = Integer.parseInt(s.nextToken());
        int m = Integer.parseInt(s.nextToken());
        int r = Integer.parseInt(s.nextToken());
        Integer [] production = new Integer [n];
        for (int i = 0; i < n; i++) {
            production[i] = Integer.parseInt(br.readLine());
        }
        Integer [][] shops = new Integer [m][2];
        for (int i = 0; i < m; i++) {
            s = new StringTokenizer(br.readLine());
            shops[i][1] = Integer.parseInt(s.nextToken());
            shops[i][0] = Integer.parseInt(s.nextToken());
        }
        Integer [] rent = new Integer [r];
        for (int i = 0; i < r; i++) {
            rent[i] = Integer.parseInt(br.readLine());
        }
        Arrays.sort(rent, Collections.reverseOrder());
        Arrays.sort(shops, new Comparator<Integer[]>() {
            @Override
            public int compare(Integer[] a, Integer[] b) {
                return b[0] - a[0];
            }
        });
        Arrays.sort(production, Collections.reverseOrder());
        int iShop = 0;
        int iRent = 0;
        int i = 0;
        long sol = 0;
        while (i < n) {
            int litres = production[i];
            int moneyT = 0, curI = iShop;
            int last = 0;
            while (curI < m) {
                int rest = Math.min(litres, shops[curI][1]);
                moneyT += shops[curI][0] * rest;
                litres -= rest;
                if (litres == 0) {
                    last = rest;
                    break;
                } else {
                    curI++;
                }
            }
            if (iRent >= r || moneyT > rent[iRent]) {
                sol += moneyT;
                iShop = curI;
                if (iShop < m) shops[iShop][1] -= last;
                i++;
            } else {
                sol += rent[iRent];
                n--;
                iRent++;
            }
        }
        out.println(sol);
        out.close();
    }
}
```
</JavaSection>
</LanguageSection>
